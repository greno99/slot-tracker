<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üÜò OCR zu hoch - Visueller Probleml√∂ser</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        
        .problem-visual {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .screen-mockup {
            background: #333;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            border: 3px solid #555;
        }
        
        .screen-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 15px;
            color: #4CAF50;
        }
        
        .browser-window {
            background: #f0f0f0;
            border-radius: 8px;
            margin: 10px 0;
            position: relative;
            color: #333;
        }
        
        .browser-toolbar {
            background: #ddd;
            height: 40px;
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: center;
            padding: 0 10px;
            font-size: 12px;
        }
        
        .browser-content {
            padding: 20px;
            height: 200px;
            position: relative;
        }
        
        .casino-area {
            position: absolute;
            background: rgba(255, 193, 7, 0.3);
            border: 2px solid #FFC107;
            border-radius: 4px;
        }
        
        .casino-area.bet { bottom: 20px; left: 200px; width: 80px; height: 30px; }
        .casino-area.win { bottom: 20px; left: 100px; width: 90px; height: 30px; }
        .casino-area.balance { bottom: 20px; left: 20px; width: 70px; height: 30px; }
        
        .screenshot-box {
            position: absolute;
            background: rgba(255, 0, 0, 0.3);
            border: 2px solid #f44336;
            border-radius: 4px;
        }
        
        .wrong-screenshot { top: 50px; left: 200px; width: 80px; height: 30px; }
        .correct-screenshot { bottom: 20px; left: 200px; width: 80px; height: 30px; }
        
        .label {
            position: absolute;
            background: #333;
            color: white;
            padding: 2px 6px;
            font-size: 10px;
            border-radius: 3px;
            top: -20px;
            left: 0;
        }
        
        .solution-steps {
            background: rgba(76, 175, 80, 0.2);
            border-left: 4px solid #4CAF50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .warning {
            background: rgba(255, 152, 0, 0.2);
            border-left: 4px solid #FF9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .button {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px;
            transition: transform 0.2s;
        }
        
        .button:hover {
            transform: translateY(-2px);
        }
        
        .diagnostic-result {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #2196F3;
        }
        
        .arrow {
            color: #f44336;
            font-size: 24px;
            font-weight: bold;
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        h1, h2 {
            text-align: center;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .highlight {
            color: #4CAF50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üÜò OCR "Viel zu hoch" Problem</h1>
        <h2>Visueller Probleml√∂ser</h2>
        
        <div class="warning">
            <h3>‚ö†Ô∏è Dein Problem:</h3>
            <p><strong>"Der Screenshot ist nun viel zu hoch. Wenn ich in der Y-Koordinate etwas √§ndere, geht das Screenshot nicht weiter runter."</strong></p>
            <p>Das bedeutet: <span class="highlight">Browser-Fenster vs. Desktop-Koordinaten Problem!</span></p>
        </div>
        
        <div class="problem-visual">
            <div class="screen-mockup">
                <div class="screen-title">‚ùå AKTUELLES PROBLEM</div>
                <div class="browser-window">
                    <div class="browser-toolbar">üåê casino-seite.com</div>
                    <div class="browser-content">
                        <div class="casino-area bet"><div class="label">BET: ‚Ç¨2.50</div></div>
                        <div class="casino-area win"><div class="label">WIN: ‚Ç¨15.75</div></div>
                        <div class="casino-area balance"><div class="label">BAL: ‚Ç¨127.25</div></div>
                        
                        <!-- Falsche Screenshot-Position -->
                        <div class="screenshot-box wrong-screenshot">
                            <div class="label" style="background: #f44336;">Screenshot hier!</div>
                        </div>
                    </div>
                </div>
                <div class="arrow">‚Üí</div>
            </div>
            
            <div class="screen-mockup">
                <div class="screen-title">‚úÖ GEW√úNSCHTE L√ñSUNG</div>
                <div class="browser-window">
                    <div class="browser-toolbar">üåê casino-seite.com</div>
                    <div class="browser-content">
                        <div class="casino-area bet"><div class="label">BET: ‚Ç¨2.50</div></div>
                        <div class="casino-area win"><div class="label">WIN: ‚Ç¨15.75</div></div>
                        <div class="casino-area balance"><div class="label">BAL: ‚Ç¨127.25</div></div>
                        
                        <!-- Richtige Screenshot-Position -->
                        <div class="screenshot-box correct-screenshot">
                            <div class="label" style="background: #4CAF50;">Screenshot hier!</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="solution-steps">
            <h3>üéØ WARUM PASSIERT DAS?</h3>
            <ol>
                <li><strong>Koordinaten-System Problem:</strong> Deine Koordinaten sind relativ zum <span class="highlight">Browser-Fenster</span></li>
                <li><strong>Screenshot-System:</strong> Erfasst aber den <span class="highlight">ganzen Desktop</span></li>
                <li><strong>Toolbar-Offset:</strong> Browser-Toolbar schiebt alles um ~70px nach unten</li>
                <li><strong>Fenster-Position:</strong> Browser-Fenster ist nicht bei (0,0) auf dem Desktop</li>
            </ol>
        </div>
        
        <h2>üöÄ SOFORT-L√ñSUNGEN</h2>
        
        <div class="solution-steps">
            <h3>1Ô∏è‚É£ BROWSER RICHTIG POSITIONIEREN</h3>
            <ul>
                <li>Casino-Browser <span class="highlight">MAXIMIEREN</span> (F11 f√ºr Vollbild)</li>
                <li>Browser an <span class="highlight">obere linke Ecke</span> des Hauptmonitors</li>
                <li>Falls mehrere Monitore: Casino nur auf <span class="highlight">Hauptmonitor</span></li>
                <li>Browser-Zoom auf <span class="highlight">100%</span> einstellen</li>
            </ul>
        </div>
        
        <div class="solution-steps">
            <h3>2Ô∏è‚É£ BROWSER-FENSTER DETECTION VERWENDEN</h3>
            <p>Entferne den alten Offset-Fix und verwende stattdessen:</p>
            <div class="code-block">
node BROWSER-FENSTER-FIX.js
// Kopiere den Code aus dieser Datei in deine main.js
            </div>
            <button class="button" onclick="copyBrowserFix()">üìã Browser-Fix Code kopieren</button>
        </div>
        
        <div class="solution-steps">
            <h3>3Ô∏è‚É£ SYSTEM DIAGNOSTIZIEREN</h3>
            <p>Finde heraus was genau das Problem ist:</p>
            <div class="code-block">
node coordinate-diagnostic-tool.js
            </div>
            <p>Das Tool erstellt Screenshots und zeigt dir <strong>genau</strong> wo das Problem liegt!</p>
            <button class="button" onclick="runDiagnostic()">üîç Diagnose starten</button>
        </div>
        
        <h2>üéØ WAHRSCHEINLICHSTE URSACHEN</h2>
        
        <div class="diagnostic-result">
            <h3>üìä Problem-Ranking:</h3>
            <div style="margin: 10px 0;"><strong>90%:</strong> Browser-Fenster Position unbekannt</div>
            <div style="margin: 10px 0;"><strong>80%:</strong> Browser-Toolbar H√∂he nicht ber√ºcksichtigt (~70px)</div>
            <div style="margin: 10px 0;"><strong>70%:</strong> Multi-Monitor Setup</div>
            <div style="margin: 10px 0;"><strong>60%:</strong> DPI-Skalierung (125%, 150%)</div>
            <div style="margin: 10px 0;"><strong>40%:</strong> Browser nicht maximiert/falsche Position</div>
            <div style="margin: 10px 0;"><strong>20%:</strong> Screenshot-Methode Problem</div>
        </div>
        
        <div class="warning">
            <h3>‚ö†Ô∏è WICHTIG:</h3>
            <p>Das Problem ist <strong>NICHT</strong> in deinen Casino-Koordinaten!</p>
            <p>Die Koordinaten sind wahrscheinlich korrekt, aber das System wei√ü nicht:</p>
            <ul>
                <li>Wo sich das Browser-Fenster befindet</li>
                <li>Wie hoch die Browser-Toolbar ist</li>
                <li>Ob Browser maximiert oder im Fenster-Modus ist</li>
            </ul>
        </div>
        
        <h2>üîß SCHNELL-TESTS</h2>
        
        <div class="solution-steps">
            <h3>Test 1: Browser-Position</h3>
            <ol>
                <li>Casino-Browser √∂ffnen</li>
                <li>F11 dr√ºcken (Vollbild-Modus)</li>
                <li>OCR-Test durchf√ºhren</li>
                <li>Funktioniert es jetzt? ‚Üí Toolbar war das Problem!</li>
            </ol>
        </div>
        
        <div class="solution-steps">
            <h3>Test 2: Koordinaten-Ursprung</h3>
            <ol>
                <li>Erstelle Test-Bereich bei X=0, Y=0, Width=100, Height=100</li>
                <li>Schaue wo der Screenshot landet</li>
                <li>Das zeigt dir den Koordinaten-Offset!</li>
            </ol>
        </div>
        
        <div class="solution-steps">
            <h3>Test 3: Multi-Monitor</h3>
            <ol>
                <li>Falls mehrere Monitore: zweiten Monitor abstecken</li>
                <li>Casino nur auf Hauptmonitor √∂ffnen</li>
                <li>OCR-Test wiederholen</li>
            </ol>
        </div>
        
        <div style="text-align: center; margin-top: 40px;">
            <h2>üéâ Nach der L√∂sung sollte es funktionieren!</h2>
            <p>Screenshots landen genau wo die Casino-Bereiche sind</p>
            <button class="button" style="background: linear-gradient(135deg, #2196F3, #1976D2);" onclick="openHelp()">üìö Weitere Hilfe</button>
        </div>
    </div>
    
    <script>
        function copyBrowserFix() {
            // Simuliere das Kopieren des Browser-Fix Codes
            const code = `// === BROWSER-FENSTER DETECTION FIX ===
async function getBrowserWindowPosition() {
    // ... Browser Detection Code ...
}

const originalScaleCoordinates = scaleCoordinatesIfNeeded;
scaleCoordinatesIfNeeded = async function(area) {
    let scaledArea = originalScaleCoordinates(area);
    const browserPos = await getBrowserWindowPosition();
    
    if (browserPos.found) {
        return {
            x: browserPos.x + scaledArea.x,
            y: browserPos.y + scaledArea.y + 70, // +70 f√ºr Browser-Toolbar
            width: scaledArea.width,
            height: scaledArea.height
        };
    }
    // ... Rest des Codes ...
};`;
            
            navigator.clipboard.writeText(code).then(() => {
                alert('‚úÖ Browser-Fix Code in Zwischenablage kopiert!\\n\\nJetzt:\\n1. Alten Offset-Fix aus main.js entfernen\\n2. Diesen Code einf√ºgen\\n3. App neustarten');
            }).catch(() => {
                alert('‚ö†Ô∏è Kopieren fehlgeschlagen. √ñffne BROWSER-FENSTER-FIX.js und kopiere manuell.');
            });
        }
        
        function runDiagnostic() {
            alert('üîç Diagnose starten:\\n\\n1. Terminal √∂ffnen\\n2. "node coordinate-diagnostic-tool.js" ausf√ºhren\\n3. Warten bis Diagnose abgeschlossen\\n4. Debug-Screenshots im coordinate-debug Ordner anschauen');
        }
        
        function openHelp() {
            alert('üìö Weitere Hilfe:\\n\\n1. README-OCR-L√ñSUNG.md lesen\\n2. SOFORT-HILFE-ZU-HOCH.js ausf√ºhren\\n3. Bei Problemen: Screenshots aus coordinate-debug analysieren\\n4. Casino-Browser im Vollbild-Modus probieren');
        }
        
        // Automatische System-Erkennung
        window.addEventListener('load', () => {
            const screenWidth = screen.width;
            const screenHeight = screen.height;
            const pixelRatio = window.devicePixelRatio;
            
            console.log('System erkannt:', {
                screen: screenWidth + 'x' + screenHeight,
                pixelRatio: pixelRatio,
                userAgent: navigator.userAgent
            });
            
            if (pixelRatio !== 1) {
                const warning = document.createElement('div');
                warning.className = 'warning';
                warning.innerHTML = `
                    <h3>‚ö†Ô∏è DPI-SKALIERUNG ERKANNT</h3>
                    <p>Dein System verwendet ${Math.round(pixelRatio * 100)}% DPI-Skalierung.</p>
                    <p>Das ist wahrscheinlich ein Teil des Problems!</p>
                `;
                document.querySelector('.container').insertBefore(warning, document.querySelector('h2'));
            }
        });
    </script>
</body>
</html>
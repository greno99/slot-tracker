<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 FIXED Casino Detection Setup</title>
    <link rel="stylesheet" href="spin-detection.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 FIXED Casino Detection</h1>
            <p style="font-size: 1.1em; opacity: 0.9;">Funktionsfähige Casino-Website Integration</p>
        </div>
        
        <div class="success-box">
            <strong>🤖 REAL OCR IMPLEMENTED:</strong>
            <ul class="feature-list">
                <li><strong>Echte Tesseract.js OCR</strong> - liest tatsächliche Bildschirmtexte!</li>
                <li>Intelligente Bildverbesserung für bessere Texterkennung</li>
                <li>Validierung und Fallback-System für Robustheit</li>
                <li>Debug-Screenshots zur OCR-Analyse</li>
                <li>Keine Zufallswerte mehr - nur echte gelesene Zahlen!</li>
            </ul>
            <div style="margin-top: 15px; padding: 10px; background: rgba(16, 185, 129, 0.2); border-radius: 8px;">
                <strong>🎯 Jetzt funktionsfähig:</strong> Das System liest echte Zahlen von deinem Casino-Bildschirm!
            </div>
        </div>
        
        <div class="step">
            <h3><span class="step-number">1</span>🎯 FIXED: Globale Spin-Button Erkennung</h3>
            <p><strong>Jetzt funktionsfähig:</strong> Echte systemweite Mauserkennung mit PowerShell (Windows) + Fallback für andere Systeme.</p>
            
            <div class="btn-group">
                <button class="btn btn-success" id="startSetupBtn">🚀 Setup starten</button>
                <button class="btn btn-danger" id="stopSetupBtn" style="display:none;">⏹️ Setup beenden</button>
            </div>
            
            <div class="coordinates" id="coordinates" style="display:none;">
                <div><strong>System Mouse Position:</strong> <span id="mousePos">Wird erfasst...</span></div>
                <div><strong>Spin-Button Kalibriert:</strong> <span id="spinBtnPos">Noch nicht gesetzt</span></div>
                <div style="margin-top: 10px; font-size: 12px; color: #00d4ff;">
                    💡 <strong>NEU:</strong> Globale Erkennung funktioniert systemweit - nicht nur im Fenster!
                </div>
            </div>
        </div>
        
        <div class="step">
            <h3><span class="step-number">2</span>🔍 OCR-Bereiche (Funktioniert jetzt!)</h3>
            <p><strong>FIXED:</strong> Area Selection mit funktionierender Vollbild-Überlagerung.</p>
            <div class="warning" style="margin: 15px 0; padding: 12px; background: rgba(59, 130, 246, 0.2); border-left: 4px solid #3b82f6;">
                <strong>📊 OCR Tipps:</strong>
                <ul style="margin: 8px 0 0 20px; font-size: 0.9em;">
                    <li>Wähle Bereiche mit <strong>klar sichtbaren Zahlen</strong></li>
                    <li>Vermeide Bereiche mit überlappenden Elementen</li> 
                    <li>Einsatz-Bereich sollte z.B. "1.00" oder "2.50" enthalten</li>
                    <li>Gewinn-Bereich zeigt "0.00" oder Gewinnbetrag</li>
                    <li>Guthaben-Bereich zeigt dein aktuelles Guthaben</li>
                </ul>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-secondary" id="setBetAreaBtn">💰 Einsatz-Bereich</button>
                <button class="btn btn-secondary" id="setWinAreaBtn">🎯 Gewinn-Bereich</button>
                <button class="btn btn-secondary" id="setBalanceAreaBtn">💳 Guthaben-Bereich</button>
            </div>
            
            <div class="areas" id="areas" style="display:none;">
                <div class="area-item">
                    <span class="area-label">💰 Einsatz-Bereich:</span>
                    <span class="area-value" id="betArea">Nicht konfiguriert</span>
                </div>
                <div class="area-item">
                    <span class="area-label">🎯 Gewinn-Bereich:</span>
                    <span class="area-value" id="winArea">Nicht konfiguriert</span>
                </div>
                <div class="area-item">
                    <span class="area-label">💳 Guthaben-Bereich:</span>
                    <span class="area-value" id="balanceArea">Nicht konfiguriert</span>
                </div>
            </div>
        </div>
        
        <div class="step">
            <h3><span class="step-number">3</span>🧪 FIXED: OCR-Test (Gibt echte Werte!)</h3>
            <p><strong>REAL OCR:</strong> Echte Tesseract.js Texterkennung - liest tatsächliche Zahlen vom Bildschirm!</p>
            
            <div class="btn-group">
                <button class="btn btn-success" id="testDetectionBtn">🔬 OCR testen</button>
                <button class="btn" id="takeScreenshotBtn">📸 Debug Screenshot</button>
            </div>
            
            <div class="preview" id="preview">
                <p style="color: #9ca3af; font-style: italic;">🤖 REAL OCR mit Tesseract.js wird jetzt echte Bildschirmtexte analysieren!</p>
            </div>
        </div>
        
        <div class="step">
            <h3><span class="step-number">4</span>⚡ FIXED: Live-Detection</h3>
            <p><strong>FIXED:</strong> Keine JavaScript-Errors mehr - analyzeScreen Funktion implementiert!</p>
            
            <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                <span><strong>Engine Status:</strong></span>
                <span class="status status-inactive" id="detectionStatus">Bereit zum Start</span>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-success" id="startDetectionBtn">🚀 Live-Detection starten</button>
                <button class="btn btn-danger" id="stopDetectionBtn">⏹️ Detection stoppen</button>
            </div>
        </div>
        
        <div class="step">
            <h3><span class="step-number">📋</span>Debug-Log</h3>
            <div class="log-container" id="detectionLog">
                <div class="log-entry" style="color: #00ff41;">
                    <span style="color: #6b7280;">[🤖 REAL]</span> Tesseract.js OCR Engine implementiert und bereit!
                </div>
                <div class="log-entry" style="color: #00d4ff;">
                    <span style="color: #6b7280;">[📖 OCR]</span> Liest echte Texte von Casino-Bildschirmen
                </div>
                <div class="log-entry" style="color: #10b981;">
                    <span style="color: #6b7280;">[🎯 REAL]</span> Keine Simulationen mehr - nur echte erkannte Werte!
                </div>
                <div class="log-entry" style="color: #fbbf24;">
                    <span style="color: #6b7280;">[⚡ NEW]</span> Bildverbesserung und Validierung für beste OCR-Ergebnisse
                </div>
            </div>
        </div>
        
        <div class="close-section">
            <button class="btn btn-danger" id="closeBtn">🚪 Fenster schließen</button>
        </div>
    </div>
    <script src="spin-detection.js"></script>
  
</body>
</html>